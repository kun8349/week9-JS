{"version":3,"sources":["all.js"],"names":["productsData","cartData","productWrap","document","querySelector","productSelect","cartListBody","cartListFoot","discardAllBtn","customerName","customerPhone","customerEmail","customerAddress","tradeWay","submit","init","renderProduct","getCartList","axios","get","api_path","then","response","data","products","str","forEach","item","mixProductHTML","innerHTML","images","id","title","thousand","origin_price","price","addEventListener","e","console","log","txt","target","value","filterAry","category","carts","product","quantity","textContent","finalTotal","cartAmountBtn","querySelectorAll","preventDefault","getAttribute","qty","Number","patch","res","alert","error","classList","remove","txtId","num","nodeName","post","add","deleteAll","length","inputs","form","constraints","presence","message","minimum","email","nextElementSibling","errors","validate","Object","keys","parts","toString","split","replace","join"],"mappings":"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","sourcesContent":["\n\nlet productsData = [];\nlet cartData = [];\n//產品列表DOM\nconst productWrap = document.querySelector('.productWrap');\n//篩選器DOM\nconst productSelect = document.querySelector('.productSelect');\n//購物車列表+單筆刪除購物車DOM\nconst cartListBody = document.querySelector('[data-cartList-body]');\nconst cartListFoot = document.querySelector('[data-cartList-foot]');\n//刪除全部購物車DOM\nconst discardAllBtn = document.querySelector('.discardAllBtn');\n//送出訂單DOM\nconst customerName = document.querySelector('#customerName');\nconst customerPhone = document.querySelector('#customerPhone');\nconst customerEmail= document.querySelector('#customerEmail')\nconst customerAddress = document.querySelector('#customerAddress');\nconst tradeWay = document.querySelector('#tradeWay');\nconst submit = document.querySelector('[data-submit]');\n\n\n\n\n//初始化網站\nfunction init(){\n  renderProduct();\n  getCartList();\n  \n}\ninit();\n\n//渲染產品列表\nfunction renderProduct(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`)\n  .then(function(response){\n      productsData = response.data.products;\n      let str = '';\n      productsData.forEach(item => {\n        str += \n        mixProductHTML(item);\n      });\n      productWrap.innerHTML = str;\n  })\n}\n\n//消除重複-innerHTML\nfunction mixProductHTML(item){\n   return `<li class=\"productCard\">\n   <h4 class=\"productType\">新品</h4>\n   <img src=\"${item.images}\" alt=\"\">\n   <a href=\"#\" class=\"addCardBtn\" data-id='${item.id}'>加入購物車</a>\n   <h3>${item.title}</h3>\n   <del class=\"originPrice\">NT$${thousand(item.origin_price)}</del>\n   <p class=\"nowPrice\">NT$${thousand(item.price)}</p>\n</li>`\n\n   \n}\n\n//篩選器\nproductSelect.addEventListener('change',e=>{\n  console.log();\n  const txt = e.target.value;\n  if(txt === '全部'){\n    renderProduct();\n    return;\n  }\n  let str = '';\n  let filterAry = [];\n  productsData.forEach(item=>{\n    if(item.category === txt){\n      str += \n      mixProductHTML(item);\n\n    }\n  })\n  productWrap.innerHTML = str;\n})\n\n//取得購物車列表\nfunction getCartList(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n  .then(response=>{\n    cartData = response.data.carts;\n    let str = ''\n    cartData.forEach(item=>{\n      str += `<tr class='shoppingCart-bottom'>\n                <td>\n                    <div class=\"cardItem-title\">\n                        <img src=\"${item.product.images}\" alt=\"\">\n                        <p>${item.product.title}</p>\n                    </div>\n                </td>\n                <td>NT$${thousand(item.product.price)}</td>\n                <td>\n                  <div class='d-flex justify-content-center align-items-center'>\n                    <a href=\"#\"><span class=\"material-icons cartAmount-icon\" data-id=\"${item.id}\">remove</span></a>\n                    <p data-change>${item.quantity}</p>\n                    <a href=\"#\"><span class=\"material-icons cartAmount-icon\" data-id=\"${item.id}\" data-qty=\"${item.quantity}\">add</span></a>\n                  </div>\n                </td>\n                <td>NT$${thousand(item.product.price*item.quantity)}</td>\n                <td class=\"discardBtn\">\n                    <a data-product='${item.id}' href=\"#\" class=\"material-icons\">\n                        clear\n                    </a>\n                </td>\n              </tr>`\n    })\n    cartListBody.innerHTML = str;\n    cartListFoot.textContent = `NT${thousand(response.data.finalTotal)}`\n    //新增功能:修改數量\n    const cartAmountBtn = document.querySelectorAll('.cartAmount-icon');\n    cartAmountBtn.forEach(item=>{\n      item.addEventListener('click',e=>{\n        e.preventDefault();\n        let id = e.target.getAttribute('data-id');\n        let qty = Number(e.target.getAttribute('data-qty'));\n        if(e.target.textContent ==='add'){\n          qty += 1;\n\n        }else if(e.target.textContent ==='remove'){\n          qty -= 1;\n\n        }\n        axios.patch(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n          \"data\": {\n            \"id\": id,\n            \"quantity\": qty\n          }\n        })\n        .then(res=>{\n          alert('修改數量成功')\n          getCartList();\n        })\n        .catch(error=>{\n          console.log(error.data);\n        })\n      })\n    })\n  })\n}\n\n//新增功能:修改購物車數量\n\n\n//加入購物車\nproductWrap.addEventListener('click',e=>{\n  e.preventDefault();\n  discardAllBtn.classList.remove('discss');\n  const txtId = e.target.getAttribute('data-id');\n  let num = 1;\n  cartData.forEach(item=>{\n    if(item.product.id===txtId){\n      num = (item.quantity += 1);\n    }\n  })\n  if(e.target.nodeName !== 'A'){return};\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n    \"data\": {\n      \"productId\": txtId,\n      \"quantity\": num\n    }\n  })\n  .then(response=>{\n    alert('產品加入成功');\n    getCartList();\n  })\n  .catch(error=>{\n    console.log(error.data);\n  })\n})\n\n//刪除全部購物車\ndiscardAllBtn.addEventListener('click',e=>{\n  e.preventDefault();\n  discardAllBtn.classList.add('discss');\n  deleteAll();  \n})\nfunction deleteAll(){\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n    .then(response=>{\n      alert('產品全部刪除成功');\n      getCartList();\n      \n    }).catch(error=>{\n      console.log(error.data);\n    })\n}\n\n//單筆刪除購物車\ncartListBody.addEventListener('click',e=>{\n  e.preventDefault();\n  if(e.target.nodeName !=='A'){return};\n  let id = e.target.getAttribute('data-product');\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`)\n    .then(response=>{\n      alert('產品刪除成功!');\n      getCartList();\n\n    }).catch(error=>{\n      console.log(error.data);\n    })\n  if(cartData.length<=1){discardAllBtn.classList.add('discss');}\n})\n\n//送出表單資料\nsubmit.addEventListener('click',e=>{\n  e.preventDefault();\n  if(cartData.length==0){return alert('請加入購物車清單')}\n  if(customerName.value == ''|| customerPhone.value == ''||customerEmail.value == ''||customerAddress.value == ''||tradeWay.value == '')\n  {return alert('請填寫正確訂單資訊')}\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,{\n  \"data\": {\n    \"user\": {\n      \"name\": customerName.value,\n      \"tel\": customerPhone.value,\n      \"email\": customerEmail.value,\n      \"address\": customerAddress.value,\n      \"payment\": tradeWay.value\n    }\n  }\n  }).then(response=>{\n    alert('訂單建立成功')\n    customerName.value = '';\n    customerPhone.value = '';\n    customerEmail.value = '';\n    customerAddress.value = '';\n    tradeWay.value = 'ATM';\n    cartData.length = 0;\n    getCartList();\n  }).catch(error=>{\n    console.log(response.data);\n  })\n  \n})\n\n//驗證\n//綁驗證value的DOM\nconst inputs = document.querySelectorAll(\"input[name],select[data=payment]\");\n//綁整個表單的DOM\nconst form = document.querySelector(\".orderInfo-form\");\n//validate格式\nconst constraints = {\n  \"姓名\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n  \"電話\": {\n    presence: {\n      message: \"必填欄位\"\n    },\n    length: {\n      minimum: 8,\n      message: \"需超過 8 碼\"\n    }\n  },\n  \"Email\": {\n    presence: {\n      message: \"必填欄位\"\n    },\n    email: {\n      message: \"格式錯誤\"\n    }\n  },\n  \"寄送地址\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n  \"交易方式\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n};\n\n\ninputs.forEach((item) => {\n  item.addEventListener(\"change\", function () {\n    //更換成空字串\n    item.nextElementSibling.textContent = '';\n    let errors = validate(form, constraints) || '';\n    console.log(errors)\n\n    if (errors) {\n      Object.keys(errors).forEach(function (keys) {\n        // console.log(document.querySelector(`[data-message=${keys}]`))\n        document.querySelector(`[data-message=\"${keys}\"]`).textContent = errors[keys];\n      })\n    }\n  });\n});\n\n\n//utility js\nfunction thousand(num){\n  var parts = num.toString().split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  return parts.join('.');\n}\n\n\n\n"],"file":"all.js"}