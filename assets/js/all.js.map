{"version":3,"sources":["all.js"],"names":["productWrap","document","querySelector","productSelect","cartListBody","cartListFoot","discardAllBtn","customerName","customerPhone","customerEmail","customerAddress","tradeWay","submit","productsData","cartData","init","renderProduct","getCartList","axios","get","api_path","then","response","data","products","str","forEach","item","mixProductHTML","innerHTML","images","id","title","thousand","origin_price","price","addEventListener","e","txt","target","value","category","carts","length","classList","add","remove","renderCartList","textContent","finalTotal","error","alert","ary","product","quantity","cartAmountBtn","querySelectorAll","preventDefault","dataset","qty","Number","changeQty","num","patch","res","txtId","getAttribute","nodeName","post","console","log","deleteAll","inputs","form","constraints","presence","message","minimum","email","nextElementSibling","errors","validate","Object","keys","parts","toString","split","replace","join"],"mappings":"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","sourcesContent":["\n\n\n//產品列表DOM\nconst productWrap = document.querySelector('.productWrap');\n//篩選器DOM\nconst productSelect = document.querySelector('.productSelect');\n//購物車列表+單筆刪除購物車DOM\nconst cartListBody = document.querySelector('[data-cartList-body]');\nconst cartListFoot = document.querySelector('[data-cartList-foot]');\n//刪除全部購物車DOM\nconst discardAllBtn = document.querySelector('.discardAllBtn');\n//送出訂單DOM\nconst customerName = document.querySelector('#customerName');\nconst customerPhone = document.querySelector('#customerPhone');\nconst customerEmail= document.querySelector('#customerEmail')\nconst customerAddress = document.querySelector('#customerAddress');\nconst tradeWay = document.querySelector('#tradeWay');\nconst submit = document.querySelector('[data-submit]');\n//產品列表\nlet productsData = [];\n//購物車列表\nlet cartData = [];\n\n\n//初始化網站\nfunction init(){\n  renderProduct();\n  getCartList();\n  \n}\ninit();\n\n//渲染產品列表\nfunction renderProduct(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`)\n  .then(function(response){\n      productsData = response.data.products;\n      let str = '';\n      productsData.forEach(item => {\n        str += \n        mixProductHTML(item);\n      });\n      productWrap.innerHTML = str;\n  })\n}\n\n//消除重複-innerHTML\nfunction mixProductHTML(item){\n   return `<li class=\"productCard\">\n   <h4 class=\"productType\">新品</h4>\n   <img src=\"${item.images}\" alt=\"\">\n   <a href=\"#\" class=\"addCardBtn\" data-id='${item.id}'>加入購物車</a>\n   <h3>${item.title}</h3>\n   <del class=\"originPrice\">NT$${thousand(item.origin_price)}</del>\n   <p class=\"nowPrice\">NT$${thousand(item.price)}</p>\n</li>`\n\n   \n}\n\n//篩選器\nproductSelect.addEventListener('change',e=>{\n  const txt = e.target.value;\n  if(txt === '全部'){\n    renderProduct();\n    return;\n  }\n  let str = '';\n  productsData.forEach(item=>{\n    if(item.category === txt){\n      str += \n      mixProductHTML(item);\n\n    }\n  })\n  productWrap.innerHTML = str;\n})\n\n//取得購物車列表\nfunction getCartList(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n  .then(response=>{\n    cartData = response.data.carts;\n    //判斷全部刪除按鈕\n    if(cartData.length===0){\n      discardAllBtn.classList.add('discss');\n    }else{\n      discardAllBtn.classList.remove('discss');\n    }\n    //渲染購物車清單\n    renderCartList(cartData);\n    //購物車總金額\n    cartListFoot.textContent = `NT${thousand(response.data.finalTotal)}`\n    \n  })\n  .catch(error=>{\n    alert(error.data)\n  })\n}\n//渲染購物車清單\nfunction renderCartList(ary){\n  let str = ''\n    cartData.forEach(item=>{\n      str += `<tr class='shoppingCart-bottom'>\n                <td>\n                    <div class=\"cardItem-title\">\n                        <img src=\"${item.product.images}\" alt=\"\">\n                        <p>${item.product.title}</p>\n                    </div>\n                </td>\n                <td>NT$${thousand(item.product.price)}</td>\n                <td>\n                  <div class='d-flex justify-content-center align-items-center'>\n                    <a href=\"#\"><span class=\"material-icons cartAmount-icon\" data-id=\"${item.id}\" data-qty=\"${item.quantity - 1}\">remove</span></a>\n                    <p data-change>${item.quantity}</p>\n                    <a href=\"#\"><span class=\"material-icons cartAmount-icon\" data-id=\"${item.id}\" data-qty=\"${item.quantity + 1}\">add</span></a>\n                  </div>\n                </td>\n                <td>NT$${thousand(item.product.price*item.quantity)}</td>\n                <td class=\"discardBtn\">\n                    <a data-product='${item.id}' href=\"#\" class=\"material-icons\">\n                        clear\n                    </a>\n                </td>\n              </tr>`\n    })\n    cartListBody.innerHTML = str;\n    //新增功能:修改數量\n    const cartAmountBtn = document.querySelectorAll('.cartAmount-icon');\n\n    cartAmountBtn.forEach(item=>{\n      item.addEventListener('click',e=>{\n        e.preventDefault();\n        let id = e.target.dataset.id;\n        let qty = Number(e.target.dataset.qty);\n        changeQty(id,qty);\n      })\n    })\n}\n//新增功能:修改購物車數量\nfunction changeQty(id,num){ \n  if(num>0){\n    axios.patch(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n          \"data\": {\n            \"id\": id,\n            \"quantity\": num,\n          }\n        })\n        .then(res=>{\n          alert('修改數量成功')\n          getCartList();\n        })\n        .catch(error=>{\n          alert(error.data)\n        })\n  }else{\n    return alert('數量不得小於0');\n  }\n}\n\n\n\n//加入購物車\nproductWrap.addEventListener('click',e=>{\n  e.preventDefault();\n  \n  const txtId = e.target.getAttribute('data-id');\n  let num = 1;\n  cartData.forEach(item=>{\n    if(item.product.id===txtId){\n      num = (item.quantity += 1);\n    }\n  })\n  if(e.target.nodeName !== 'A'){return};\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n    \"data\": {\n      \"productId\": txtId,\n      \"quantity\": num\n    }\n  })\n  .then(response=>{\n    alert('產品加入成功');\n    cartData = response.data.carts;\n    renderCartList(cartData);\n  })\n  .catch(error=>{\n    console.log(error.data);\n  })\n})\n\n//刪除全部購物車\ndiscardAllBtn.addEventListener('click',e=>{\n  e.preventDefault();\n  \n  deleteAll();  \n})\nfunction deleteAll(){\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n    .then(response=>{\n      alert('產品全部刪除成功');\n      getCartList();\n      \n    }).catch(error=>{\n      console.log(error.data);\n    })\n}\n\n//單筆刪除購物車\ncartListBody.addEventListener('click',e=>{\n  e.preventDefault();\n  if(e.target.nodeName !=='A'){return};\n  let id = e.target.getAttribute('data-product');\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`)\n    .then(response=>{\n      alert('產品刪除成功!');\n      getCartList();\n\n    })\n    .catch(error=>{\n      console.log(error.data);\n    })\n  \n})\n\n//送出表單資料\nsubmit.addEventListener('click',e=>{\n  e.preventDefault();\n  if(cartData.length==0){return alert('請加入購物車清單')}\n  if(customerName.value == ''|| customerPhone.value == ''||customerEmail.value == ''||customerAddress.value == ''||tradeWay.value == '')\n  {return alert('請填寫正確訂單資訊')}\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,{\n  \"data\": {\n    \"user\": {\n      \"name\": customerName.value,\n      \"tel\": customerPhone.value,\n      \"email\": customerEmail.value,\n      \"address\": customerAddress.value,\n      \"payment\": tradeWay.value\n    }\n  }\n  })\n  .then(response=>{\n    alert('訂單建立成功')\n    customerName.value = '';\n    customerPhone.value = '';\n    customerEmail.value = '';\n    customerAddress.value = '';\n    tradeWay.value = 'ATM';\n    cartData.length = 0;\n    getCartList();\n  })\n  .catch(error=>{\n    console.log(response.data);\n  })\n  \n})\n\n//--驗證--\n//綁驗證value的DOM\nconst inputs = document.querySelectorAll(\"input[name],select[data=payment]\");\n//綁整個表單的DOM\nconst form = document.querySelector(\".orderInfo-form\");\n//validate格式\nconst constraints = {\n  \"姓名\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n  \"電話\": {\n    presence: {\n      message: \"必填欄位\"\n    },\n    length: {\n      minimum: 8,\n      message: \"需超過 8 碼\"\n    }\n  },\n  \"Email\": {\n    presence: {\n      message: \"必填欄位\"\n    },\n    email: {\n      message: \"格式錯誤\"\n    }\n  },\n  \"寄送地址\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n  \"交易方式\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n};\n\n\ninputs.forEach((item) => {\n  item.addEventListener(\"change\", function () {\n    //更換成空字串\n    item.nextElementSibling.textContent = '';\n    let errors = validate(form, constraints) || '';\n    console.log(errors)\n\n    if (errors) {\n      Object.keys(errors).forEach(function (keys) {\n        // console.log(document.querySelector(`[data-message=${keys}]`))\n        document.querySelector(`[data-message=\"${keys}\"]`).textContent = errors[keys];\n      })\n    }\n  });\n});\n\n\n//utility js\nfunction thousand(num){\n  var parts = num.toString().split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  return parts.join('.');\n}\n\n\n\n"],"file":"all.js"}