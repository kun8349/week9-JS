{"version":3,"sources":["all.js"],"names":["productWrap","document","querySelector","productSelect","cartListBody","cartListFoot","discardAllBtn","customerName","customerPhone","customerEmail","customerAddress","tradeWay","submit","productsData","cartData","cartPriceTotal","init","renderProduct","getCartList","axios","get","api_path","then","response","data","products","str","forEach","item","mixProductHTML","innerHTML","images","id","title","thousand","origin_price","price","addEventListener","e","txt","target","value","category","carts","length","classList","add","remove","renderCartList","error","alert","ary","product","quantity","cartAmountBtn","querySelectorAll","preventDefault","dataset","qty","Number","changeQty","totalPriceHTML","total","textContent","finalTotal","num","patch","res","txtId","getAttribute","nodeName","post","console","log","deleteAll","sendform","inputs","form","constraints","presence","message","minimum","email","nextElementSibling","errors","validate","Object","keys","parts","toString","split","replace","join"],"mappings":"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","sourcesContent":["//產品列表DOM\nconst productWrap = document.querySelector('.productWrap');\n//篩選器DOM\nconst productSelect = document.querySelector('.productSelect');\n//購物車列表+單筆刪除購物車DOM\nconst cartListBody = document.querySelector('[data-cartList-body]');\nconst cartListFoot = document.querySelector('[data-cartList-foot]');\n//刪除全部購物車DOM\nconst discardAllBtn = document.querySelector('.discardAllBtn');\n//送出訂單DOM\nconst customerName = document.querySelector('#customerName');\nconst customerPhone = document.querySelector('#customerPhone');\nconst customerEmail= document.querySelector('#customerEmail')\nconst customerAddress = document.querySelector('#customerAddress');\nconst tradeWay = document.querySelector('#tradeWay');\nconst submit = document.querySelector('[data-submit]');\n//產品列表\nlet productsData = [];\n//購物車列表\nlet cartData = [];\n//總金額\nlet cartPriceTotal = [];\n\n//初始化網站\nfunction init(){\n  renderProduct();\n  getCartList();\n  \n}\ninit();\n\n//渲染產品列表\nfunction renderProduct(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`)\n  .then(function(response){\n      productsData = response.data.products;\n      let str = '';\n      productsData.forEach(item => {\n        str += \n        mixProductHTML(item);\n      });\n      productWrap.innerHTML = str;\n  })\n}\n\n//消除重複-innerHTML\nfunction mixProductHTML(item){\n   return `<li class=\"productCard\">\n   <h4 class=\"productType\">新品</h4>\n   <img src=\"${item.images}\" alt=\"\">\n   <a href=\"#\" class=\"addCardBtn\" data-id='${item.id}'>加入購物車</a>\n   <h3>${item.title}</h3>\n   <del class=\"originPrice\">NT$${thousand(item.origin_price)}</del>\n   <p class=\"nowPrice\">NT$${thousand(item.price)}</p>\n</li>`\n\n   \n}\n\n//篩選器\nproductSelect.addEventListener('change',e=>{\n  const txt = e.target.value;\n  if(txt === '全部'){\n    renderProduct();\n    return;\n  }\n  let str = '';\n  productsData.forEach(item=>{\n    if(item.category === txt){\n      str += \n      mixProductHTML(item);\n\n    }\n  })\n  productWrap.innerHTML = str;\n})\n\n//取得購物車列表\nfunction getCartList(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n  .then(response=>{\n    cartData = response.data.carts;\n    cartPriceTotal = response.data;\n    //判斷全部刪除按鈕\n    if(cartData.length===0){\n      discardAllBtn.classList.add('discss');\n    }else{\n      discardAllBtn.classList.remove('discss');\n    }\n    //渲染購物車清單\n    renderCartList(cartData,cartPriceTotal);\n    //購物車總金額\n    \n    \n  })\n  .catch(error=>{\n    alert(error.data)\n  })\n}\n//渲染購物車清單\nfunction renderCartList(ary){\n  let str = ''\n  ary.forEach(item=>{\n      str += `<tr class='shoppingCart-bottom'>\n                <td>\n                    <div class=\"cardItem-title\">\n                        <img src=\"${item.product.images}\" alt=\"\">\n                        <p>${item.product.title}</p>\n                    </div>\n                </td>\n                <td>NT$${thousand(item.product.price)}</td>\n                <td>\n                  <div class='d-flex justify-content-center align-items-center'>\n                    <a href=\"#\"><span class=\"material-icons cartAmount-icon\" data-id=\"${item.id}\" data-qty=\"${item.quantity - 1}\">remove</span></a>\n                    <p data-change>${item.quantity}</p>\n                    <a href=\"#\"><span class=\"material-icons cartAmount-icon\" data-id=\"${item.id}\" data-qty=\"${item.quantity + 1}\">add</span></a>\n                  </div>\n                </td>\n                <td>NT$${thousand(item.product.price*item.quantity)}</td>\n                <td class=\"discardBtn\">\n                    <a data-product='${item.id}' href=\"#\" class=\"material-icons\">\n                        clear\n                    </a>\n                </td>\n              </tr>`\n    })\n    cartListBody.innerHTML = str;\n    \n    //新增功能:修改數量\n    const cartAmountBtn = document.querySelectorAll('.cartAmount-icon');\n\n    cartAmountBtn.forEach(item=>{\n      item.addEventListener('click',e=>{\n        e.preventDefault();\n        let id = e.target.dataset.id;\n        let qty = Number(e.target.dataset.qty);\n        changeQty(id,qty);\n      })\n    })\n}\n//總金額\nfunction totalPriceHTML(total){\n  cartListFoot.textContent = `NT${thousand(total.finalTotal)}`\n}\n//新增功能:修改購物車數量\nfunction changeQty(id,num){ \n  if(num>0){\n    axios.patch(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n      \"data\": {\n        \"id\": id,\n        \"quantity\": num,\n      }\n    })\n    .then(res=>{\n      alert('修改數量成功')\n      getCartList();\n    })\n    .catch(error=>{\n      alert(error.data)\n    })\n  }else{\n    return alert('數量不得小於0');\n  }\n}\n\n\n\n//加入購物車\nproductWrap.addEventListener('click',e=>{\n  e.preventDefault();\n  \n  const txtId = e.target.getAttribute('data-id');\n  let num = 1;\n  cartData.forEach(item=>{\n    if(item.product.id===txtId){\n      num = (item.quantity += 1);\n    }\n  })\n  if(e.target.nodeName !== 'A'){return};\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n    \"data\": {\n      \"productId\": txtId,\n      \"quantity\": num\n    }\n  })\n  .then(response=>{\n    alert('產品加入成功');\n    cartData = response.data.carts;\n    cartPriceTotal = response.data;\n    renderCartList(cartData);\n    totalPriceHTML(cartPriceTotal);\n  })\n  .catch(error=>{\n    console.log(error.data);\n  })\n})\n\n//刪除全部購物車\ndiscardAllBtn.addEventListener('click',e=>{\n  e.preventDefault();\n  \n  deleteAll();  \n})\nfunction deleteAll(){\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n    .then(response=>{\n      alert('產品全部刪除成功');\n      getCartList();\n      \n    }).catch(error=>{\n      console.log(error.data);\n    })\n}\n\n//單筆刪除購物車\ncartListBody.addEventListener('click',e=>{\n  e.preventDefault();\n  if(e.target.nodeName !=='A'){return};\n  let id = e.target.getAttribute('data-product');\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`)\n    .then(response=>{\n      alert('產品刪除成功!');\n      getCartList();\n\n    })\n    .catch(error=>{\n      console.log(error.data);\n    })\n  \n})\n\n//送出表單資料\nsubmit.addEventListener('click',e=>{\n  e.preventDefault();\n  if(cartData.length==0){return alert('請加入購物車清單')}\n  if(customerName.value == ''|| customerPhone.value == ''||customerEmail.value == ''||customerAddress.value == ''||tradeWay.value == '')\n  {return alert('請填寫正確訂單資訊')}\n  sendform();\n  \n})\nfunction sendform(){\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,{\n  \"data\": {\n    \"user\": {\n      \"name\": customerName.value,\n      \"tel\": customerPhone.value,\n      \"email\": customerEmail.value,\n      \"address\": customerAddress.value,\n      \"payment\": tradeWay.value\n    }\n  }\n  })\n  .then(response=>{\n    alert('訂單建立成功')\n    customerName.value = '';\n    customerPhone.value = '';\n    customerEmail.value = '';\n    customerAddress.value = '';\n    tradeWay.value = 'ATM';\n    cartData.length = 0;\n    cartPriceTotal.finalTotal = 0;\n    renderCartList(cartData);\n    totalPriceHTML(cartPriceTotal);\n  })\n  .catch(error=>{\n    alert(error.data);\n  })\n}\n//--驗證--\n//綁驗證value的DOM\nconst inputs = document.querySelectorAll(\"input[name],select[data=payment]\");\n//綁整個表單的DOM\nconst form = document.querySelector(\".orderInfo-form\");\n//validate格式\nconst constraints = {\n  \"姓名\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n  \"電話\": {\n    presence: {\n      message: \"必填欄位\"\n    },\n    length: {\n      minimum: 8,\n      message: \"需超過 8 碼\"\n    }\n  },\n  \"Email\": {\n    presence: {\n      message: \"必填欄位\"\n    },\n    email: {\n      message: \"格式錯誤\"\n    }\n  },\n  \"寄送地址\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n  \"交易方式\": {\n    presence: {\n      message: \"必填欄位\"\n    }\n  },\n};\n\n\ninputs.forEach((item) => {\n  item.addEventListener(\"change\", function () {\n    //更換成空字串\n    item.nextElementSibling.textContent = '';\n    let errors = validate(form, constraints) || '';\n    if (errors) {\n      Object.keys(errors).forEach(function (keys) {\n        // console.log(document.querySelector(`[data-message=${keys}]`))\n        document.querySelector(`[data-message=\"${keys}\"]`).textContent = errors[keys];\n      })\n    }\n  });\n});\n\n\n//utility js\nfunction thousand(num){\n  var parts = num.toString().split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  return parts.join('.');\n}\n\n\n\n"],"file":"all.js"}