{"version":3,"sources":["all.js"],"names":["productsData","cartData","productWrap","document","querySelector","productSelect","cartListBody","cartListFoot","discardAllBtn","customerName","customerPhone","customerEmail","customerAddress","tradeWay","submit","init","renderProduct","getCartList","axios","get","api_path","then","response","data","products","str","forEach","item","mixProductHTML","innerHTML","images","id","title","origin_price","price","addEventListener","e","console","log","txt","target","value","filterAry","category","carts","product","quantity","textContent","finalTotal","error","preventDefault","classList","remove","txtId","getAttribute","num","nodeName","post","alert","add","length"],"mappings":"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","sourcesContent":["\n\nlet productsData = [];\nlet cartData = [];\n//產品列表DOM\nconst productWrap = document.querySelector('.productWrap');\n//篩選器DOM\nconst productSelect = document.querySelector('.productSelect');\n//購物車列表+單筆刪除購物車DOM\nconst cartListBody = document.querySelector('[data-cartList-body]');\nconst cartListFoot = document.querySelector('[data-cartList-foot]');\n//刪除全部購物車DOM\nconst discardAllBtn = document.querySelector('.discardAllBtn');\n//送出訂單DOM\nconst customerName = document.querySelector('#customerName');\nconst customerPhone = document.querySelector('#customerPhone');\nconst customerEmail= document.querySelector('#customerEmail')\nconst customerAddress = document.querySelector('#customerAddress');\nconst tradeWay = document.querySelector('#tradeWay');\nconst submit = document.querySelector('[data-submit]');\n\n\n\n\n//初始化網站\nfunction init(){\n  renderProduct();\n  getCartList();\n  \n}\ninit();\n\n//渲染產品列表\nfunction renderProduct(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`)\n  .then(function(response){\n      productsData = response.data.products;\n      let str = '';\n      productsData.forEach(item => {\n        str += \n        mixProductHTML(item);\n      });\n      productWrap.innerHTML = str;\n  })\n}\n\n//消除重複-innerHTML\nfunction mixProductHTML(item){\n   return `<li class=\"productCard\">\n   <h4 class=\"productType\">新品</h4>\n   <img src=\"${item.images}\" alt=\"\">\n   <a href=\"#\" class=\"addCardBtn\" data-id='${item.id}'>加入購物車</a>\n   <h3>${item.title}</h3>\n   <del class=\"originPrice\">NT$${item.origin_price}</del>\n   <p class=\"nowPrice\">NT$${item.price}</p>\n</li>`\n\n   \n}\n\n//篩選器\nproductSelect.addEventListener('change',e=>{\n  console.log();\n  const txt = e.target.value;\n  if(txt === '全部'){\n    renderProduct();\n    return;\n  }\n  let str = '';\n  let filterAry = [];\n  productsData.forEach(item=>{\n    if(item.category === txt){\n      str += \n      mixProductHTML(item);\n\n    }\n  })\n  productWrap.innerHTML = str;\n})\n\n//取得購物車列表\nfunction getCartList(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n  .then(response=>{\n    cartData = response.data.carts;\n    let str = ''\n    cartData.forEach(item=>{\n      str += `<tr class='shoppingCart-bottom'>\n                <td>\n                    <div class=\"cardItem-title\">\n                        <img src=\"${item.product.images}\" alt=\"\">\n                        <p>${item.product.title}</p>\n                    </div>\n                </td>\n                <td>NT$${item.product.price}</td>\n                <td>${item.quantity}</td>\n                <td>NT$${item.product.price*item.quantity}</td>\n                <td class=\"discardBtn\">\n                    <a data-product='${item.id}' href=\"#\" class=\"material-icons\">\n                        clear\n                    </a>\n                </td>\n              </tr>`\n    })\n    cartListBody.innerHTML = str;\n    cartListFoot.textContent = `NT${response.data.finalTotal}`\n  }).catch(error=>{\n    console.log(error.data);\n  })\n}\n\n//加入購物車\nproductWrap.addEventListener('click',e=>{\n  e.preventDefault();\n  discardAllBtn.classList.remove('discss');\n  const txtId = e.target.getAttribute('data-id');\n  let num = 1;\n  cartData.forEach(item=>{\n    if(item.product.id===txtId){\n      num += 1;\n    }\n  })\n  if(e.target.nodeName !== 'A'){return};\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`,{\n    \"data\": {\n      \"productId\": txtId,\n      \"quantity\": num\n    }\n  }).then(response=>{\n    alert('產品加入成功');\n    getCartList();\n  }).catch(error=>{\n    console.log(error.data);\n  })\n})\n\n//刪除全部購物車\ndiscardAllBtn.addEventListener('click',e=>{\n  e.preventDefault();\n  discardAllBtn.classList.add('discss');\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n    .then(response=>{\n      alert('產品全部刪除成功');\n      getCartList();\n      \n    }).catch(error=>{\n      console.log(error.data);\n    })\n    \n})\n\n//單筆刪除購物車\ncartListBody.addEventListener('click',e=>{\n  e.preventDefault();\n  if(e.target.nodeName !=='A'){return};\n  let id = e.target.getAttribute('data-product');\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`)\n    .then(response=>{\n      alert('產品刪除成功!');\n      getCartList();\n\n    }).catch(error=>{\n      console.log(error.data);\n    })\n  if(cartData.length<=1){discardAllBtn.classList.add('discss');}\n})\n\n//送出表單資料\nsubmit.addEventListener('click',e=>{\n  e.preventDefault();\n  if(cartData.length==0){return alert('請加入購物車清單')}\n  if(customerName.value == ''|| customerPhone.value == ''||customerEmail.value == ''||customerAddress.value == ''||tradeWay.value == '')\n  {return alert('請填寫正確訂單資訊')}\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,{\n  \"data\": {\n    \"user\": {\n      \"name\": customerName.value,\n      \"tel\": customerPhone.value,\n      \"email\": customerEmail.value,\n      \"address\": customerAddress.value,\n      \"payment\": tradeWay.value\n    }\n  }\n  }).then(response=>{\n    \n    console.log(response.data);\n    alert('訂單建立成功')\n  }).catch(error=>{\n    console.log(response.data);\n  })\n\n})\n\n\n\n"],"file":"all.js"}